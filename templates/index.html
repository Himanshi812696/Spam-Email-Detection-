<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SpamShield Â· complete email guard</title>

    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
        }

        body {
            background: #e9eff5;
            min-height: 100vh;
            padding: 2rem 1.2rem;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .shield {
            max-width: 1000px;
            width: 100%;
            background: rgba(255,255,255,0.92);
            backdrop-filter: blur(10px);
            border-radius: 44px;
            box-shadow: 0 30px 50px -20px rgba(0,30,50,0.35);
            padding: 2.4rem 2.2rem;
        }

        .site-title {
            text-align: center;
            font-size: 1.8rem;
            font-weight: 700;
            color: #0b3343;
            margin-bottom: 1.5rem;
        }

        .label-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 0.5rem;
        }

        .label-row span {
            font-weight: 600;
            color: #134b5a;
            font-size: 0.9rem;
        }

        textarea {
            width: 100%;
            padding: 1.2rem 1.5rem;
            font-size: 1rem;
            border: 2px solid #c6dae5;
            border-radius: 28px;
            resize: vertical;
            min-height: 140px;
            margin-bottom: 1.2rem;
        }

        textarea:focus {
            border-color: #1d7e8c;
            outline: none;
        }

        button {
            background: #12505e;
            color: white;
            border: none;
            padding: 0.55rem 1.4rem;
            border-radius: 40px;
            font-weight: 600;
            cursor: pointer;
            margin-right: 0.6rem;
        }

        button:hover {
            background: #0d3c46;
        }

        .progress-lg {
            height: 12px;
            background: #e2ecf0;
            border-radius: 40px;
            overflow: hidden;
            margin: 1.2rem 0 0.6rem;
        }

        .progress-fill {
            height: 100%;
            width: 0%;
            background: linear-gradient(90deg, #2a95a8, #0d5e6b);
            transition: width 0.35s ease;
        }

        .spam-badge-large {
            font-size: 1.3rem;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 0.4rem;
            margin: 0.6rem 0;
        }

        .clean-marker {
            background: #e3f0ea;
            color: #206255;
            padding: 0.5rem 1rem;
            border-radius: 40px;
            font-size: 0.85rem;
            margin-top: 0.6rem;
        }

        .category-group {
            margin-top: 1rem;
        }

        .category-title {
            font-size: 0.75rem;
            font-weight: 700;
            color: #0e5b66;
            margin-bottom: 0.4rem;
        }

        .flag-items {
            display: flex;
            flex-wrap: wrap;
            gap: 0.4rem;
        }

        .flag-tag {
            background: #ffefcf;
            color: #845d20;
            font-size: 0.7rem;
            font-weight: 600;
            padding: 0.25rem 0.9rem;
            border-radius: 30px;
        }

        #mainVerdictDescription {
            margin-top: 0.4rem;
            font-size: 0.9rem;
        }
    </style>
</head>

<body>
    <div class="shield">

        <div class="site-title">Spam Email Detector</div>

        <div class="label-row">
            <span>ðŸ“„ Email Message</span>
            <span id="charCounter">0 characters</span>
        </div>

        <textarea id="emailInput" placeholder="Type or paste email content..."></textarea>

        <button id="predictBtn">Predict Spam</button>
        <button id="clearBtn">Clear</button>

        <div class="progress-lg">
            <div class="progress-fill" id="spamFill"></div>
        </div>

        <div class="spam-badge-large">
            <span id="verdictEmoji">â€”</span> 
            <span id="verdictText"></span>
        </div>

        <div id="mainVerdictDescription"></div>

        <div id="categoryContainer"></div>

    </div>

<script>
(function() {
"use strict";

/* ðŸ”¥ STRONG SPAM DETECTION */

const PATTERNS = {
    "ðŸ’° Financial / Money": [
        /\bfree\b/i, /\bmoney\b/i, /\bcash\b/i,
        /\bincome\b/i, /\bearn\b/i, /\bguarantee\b/i
    ],

    "â³ Urgency / Pressure": [
        /\burgent\b/i, /\bact now\b/i,
        /\blimited\b/i, /\bimmediately\b/i
    ],

    "ðŸŽ¯ Prize / Lottery": [
        /\bwinner\b/i, /\bwon\b/i,
        /\bprize\b/i, /\blottery\b/i
    ],

    "ðŸŽ£ Phishing / Scam": [
        /\bverify\b/i, /\baccount\b/i,
        /\bpassword\b/i, /\blogin\b/i
    ],

    "ðŸ“¢ Marketing / Promotion": [
        /\bbuy\b/i, /\bdiscount\b/i,
        /\boffer\b/i, /\bclick\b/i
    ],

    "â‚¿ Crypto / Investment": [
        /\bbitcoin\b/i, /\bcrypto\b/i,
        /\binvestment\b/i
    ],

    "ðŸ’Š Medical / Health": [
        /\bweight loss\b/i, /\bcure\b/i
    ],

    "ðŸ”ž Adult / Sensitive": [
        /\badult\b/i, /\bxxx\b/i
    ],

    "ðŸ§© Obfuscated Spam": [
        /\bfr33\b/i, /\bm0ney\b/i,
        /\bgu@rantee\b/i
    ]
};

const inputEl = document.getElementById("emailInput");
const charCounter = document.getElementById("charCounter");
const spamFill = document.getElementById("spamFill");
const verdictEmoji = document.getElementById("verdictEmoji");
const verdictText = document.getElementById("verdictText");
const verdictDesc = document.getElementById("mainVerdictDescription");
const container = document.getElementById("categoryContainer");

function detectAllCaps(text) {
    const caps = text.match(/\b[A-Z]{4,}\b/g);
    return caps ? caps.length >= 2 : false;
}

function detectEmojiSpam(text) {
    const emojis = text.match(/[\u{1F600}-\u{1F9FF}]/gu);
    return emojis ? emojis.length >= 3 : false;
}

function scanEmail(text) {
    let matches = {};
    let score = 0;
    let totalFlags = 0;

    Object.keys(PATTERNS).forEach(cat => {
        matches[cat] = [];
        PATTERNS[cat].forEach(p => {
            if (p.test(text)) {
                matches[cat].push(p.source);
                score += 8;
                totalFlags++;
            }
        });
    });

    if (detectAllCaps(text)) {
        matches["âš ï¸ ALL CAPS"] = ["Excessive capital words"];
        score += 15;
        totalFlags++;
    }

    if (detectEmojiSpam(text)) {
        matches["ðŸ˜² Excessive Emojis"] = ["Too many emojis"];
        score += 10;
        totalFlags++;
    }

    score = Math.min(score, 100);

    return {matches, score, totalFlags, isSpam: score >= 15};
}

function renderAnalysis() {
    const text = inputEl.value;
    charCounter.textContent = text.length + " characters";

    const result = scanEmail(text);
    spamFill.style.width = result.score + "%";

    container.innerHTML = "";

    if (result.isSpam) {
        verdictEmoji.textContent = "ðŸš©";
        verdictText.textContent = "SPAM DETECTED";
        verdictDesc.innerHTML =
            `ðŸ”´ <strong>Spam flagged</strong> â€” ${result.totalFlags} indicator(s) detected.`;
    } else {
        verdictEmoji.textContent = "âœ…";
        verdictText.textContent = "Clean Message";
        verdictDesc.innerHTML = "ðŸŸ¢ No spam patterns detected.";
        if (text.trim() !== "") {
            container.innerHTML = "<div class='clean-marker'>âœ“ No spam triggers</div>";
        }
    }

    Object.keys(result.matches).forEach(cat => {
        if (result.matches[cat]?.length > 0) {
            const group = document.createElement("div");
            group.className = "category-group";
            group.innerHTML = `<div class="category-title">${cat}</div>`;
            const wrap = document.createElement("div");
            wrap.className = "flag-items";

            result.matches[cat].forEach(flag => {
                const tag = document.createElement("span");
                tag.className = "flag-tag";
                tag.textContent = flag;
                wrap.appendChild(tag);
            });

            group.appendChild(wrap);
            container.appendChild(group);
        }
    });
}

document.getElementById("predictBtn").addEventListener("click", renderAnalysis);

document.getElementById("clearBtn").addEventListener("click", () => {
    inputEl.value = "";
    spamFill.style.width = "0%";
    verdictEmoji.textContent = "â€”";
    verdictText.textContent = "";
    verdictDesc.innerHTML = "";
    container.innerHTML = "";
    charCounter.textContent = "0 characters";
});

inputEl.addEventListener("input", () => {
    charCounter.textContent = inputEl.value.length + " characters";
});

})();
</script>

</body>
</html>